---
title: Migrate NS to Azion
description: insert later
meta_tags: domains
namespace: docs_guides_migrate_nameserver
permalink: /documentation/products/guides/migrate-ns-to-azion/
---

Azion allows you to host and manage DNS zones and records by redirecting the DNS resolution of your domain provider to Azion's authoritative nameservers (NS) through **Intelligent DNS**. When using Intelligent DNS, all configurations needed are made through Azion [Real-Time Manager (RTM)](http://manager.azion.com) or the [Azion API](link_api).

## Create a DNS zone

Before you transfer your DNS resolution Azion, you'll need:

- A domain registered with a hosting service.
- An Azion [account and credentials](link_account).

You can choose to migrate your name resolution to Azion using [Real-Time Manager (RTM)](#via-rtm) or the [Azion API](#via-api).

### Via RTM

To create a DNS zone for a domain entry `www.yourdomain.org` in RTM:

1. [Access RTM](http://manager.azion.com).
2. On the upper-left corner of the page, click the three horizontal lines to open the **Products menu**.
3. Under the section SECURE, select **Intelligent DNS**.
4. If you don't have an active zone yet, click the **Add Zone** button.
5. Give your zone an easy-to-remember name.
6. Indicate the FQDN as recorded in the DNS. Example: `yourdomain.org`.
7. Click the **Save** button.

You'll be redirected to your list of zones. To get the Azion nameservers:

1. Click the zone you created.
2. In the zone screen, under **Nameservers**, you'll see Azion's nameservers: 

- `ns1.aziondns.net`
- `ns2.aziondns.com`
- `ns3.aziondns.org`

3. Keep these values in hand for when you [redirect the authoritative DNS of your domain](#redirect-authoritative-dns-servers).

### Via API

Before you run the API, you'll need a personal token. See the [Azion API documentation](link_api_personal_token) for more information.

To create a DNS zone:

1. Run the following `POST` request in your terminal, replacing `[TOKEN VALUE]` with your personal token and adding your domain address in the `domain` field:

```bash
curl --location 'https://api.azionapi.net/intelligent_dns' \
--header 'Authorization: Token [TOKEN VALUE]' \
--header 'Accept: application/json; version=3' \
--header 'Content-Type: application/json' \
--data '{
    "name": "yourdomain.com Zone",
    "domain": "yourdomain.com",
    "is_active": true
}'
```

2. You'll receive a response similar to this:

```json
{
    "results": [
        {
            "nx_ttl": 3600,
            "domain": "yourdomain.com",
            "retry": 7200,
            "name": "yourdomain.com Zone",
            "nameservers": [
                "ns1.aziondns.net",
                "ns2.aziondns.com",
                "ns3.aziondns.org"
            ],
            "soa_ttl": 3600,
            "is_active": true,
            "refresh": 43200,
            "expiry": 1209600,
            "id": 3211
        }
    ]
}
```

3. Copy the values inside the `nameservers` field. These values will be used to [redirect the authoritative DNS of your domain](#redirect-authoritative-dns-servers).
4. Also copy the `id` value for when you [associate an application to your zone](#create-edge-application-record-in-dns-zone).

## Redirect authoritative nameservers

The next step is to redirect your domainâ€™s authoritative DNS servers, you'll need to access your domain provider and modify your NS records. Here are some of the most popular domain providers and how they handle DNS nameserver changes:

- [AWS Route53](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/domain-name-servers-glue-records.html)
- [GoDaddy](https://www.godaddy.com/help/edit-my-domain-nameservers-664)
- [Namecheap](https://www.namecheap.com/support/knowledgebase/article.aspx/9434/10/using-default-nameservers-vs-hosting-nameservers/)

We recommend that you add all of the three available Azion nameservers for extra reliability: 

- `ns1.aziondns.net`
- `ns2.aziondns.com`
- `ns3.aziondns.org`

Once your nameserver records have been updated to Azion's addresses, you'll be able to create records directly from Azion. See the next section for an example on how to do that.

## Create edge application record in DNS zone

After you've successfully migrated your DNS zone to Azion, you won't need to access your domain provider to create new records, since you can do that directly with Azion. This means you can launch your application with it's custom domain and easily create new applications and records as needed. To associate a new edge application to your domain, you'll need to create a new CNAME record in your zone and associate it to an edge application.

Before you transfer your DNS resolution to Azion, you'll need:

- A domain registered with a hosting service whose [DNS resolution has been transferred to Azion](#redirect-authoritative-nameservers).
- An Azion [account and credentials](link_account).
- An [edge application](link_create).
- An [Azion domain](link_configure#create-an-azion-domain).

### Via RTM

To customize the domain of your edge application under your new zone, you need to associate the CNAME of your edge application to a new record. Retrieve the custom domains listed for the application by following the steps:

1. [Access RTM](https://manager.azion.com).
2. On the upper-left corner of the page, open the **Products menu**, represented by three horizontal lines, and then select **Domain**.
3. Click the domain you want to associate your custom domain to. If you don't have a domain, [create one first](link_configure_domain).
4. In the **CNAME** field, add the custom domains for the application that should be under your DNS zone. If you already added a custom domain, copy those values and keep them in hand.

Now you'll need to navigate to the **Intelligent DNS** area to add a record for your edge application's CNAMEs:

1. On the upper-left corner of the page, open the **Products menu**, represented by three horizontal lines, and then select **Intelligent DNS**.
2. Select the DNS zone.
3. Navigate to the **Records** tab.
4. Under **Name**, create a hostname or subdomain. For example: `*`
5. Under **Type**, select `CNAME - Canonical name`.
6. Under **Value**, enter the Azion domain address in FQDN format. Example: `xxxxxxxxxx.map.azionedge.net`
7. Set the **TTL** and **Policy** as desired.
8. Click the **Save** button.

Repeat the process described above for every CNAME listed for your application. Wait a couple of minutes for the changes to propagate. You can [run the DIG command](/en/documentation/products/guides/run-the-dig-command/) in your terminal to check whether your domain points to the Azion address.

### Via API

Before you run the API, you'll need a personal token. See the [Azion API documentation](link_api_personal_token) for more information.

To customize the domains of your zone for your edge application:

1. Run the following `GET` request to retrieve your domain's id:

```bash
curl --location 'https://api.azionapi.net/domains' \
--header 'Accept: application/json; version=3' \
--header 'Authorization: Token [TOKEN VALUE]' \
```

2. You'll receive a response similar to this:

```json
{
    ...
    "results": [
        {
            "id": <domain_id>,
            "name": "My Domain",
            "cnames": [],
            "cname_access_only": true,
            "digital_certificate_id": <digital_certificate_id>,
            "edge_application_id": <edge_application_id>,
            "is_active": true,
            "domain_name": "xxxxxxxxxx.map.azionedge.net"
        }
    ]
}
```

3. Locate the domain you wish to link to the custom domain and copy the `domain_id` value received in the response.
4. If you have no CNAMEs listed, run a `PATCH` request, adding the `domain_id` as a path, to update the `cnames` field with the domains you wish to configure:

```bash
curl --location --request PATCH 'https://api.azionapi.net/domains/<domain_id>' \
--header 'Accept: application/json; version=3' \
--header 'Authorization: Token [TOKEN VALUE]' \
--header 'Content-Type: application/json' \
--data '{
    "cnames": [
        "www.yourdomain.com"
    ]
}'
```

:::tip
Add a wildcard (`*`) subdomain instead of a specific subdomain to cover all possible scenarios. This way, you won't need to create multiple records for `www.yourdomain.com` and `blog.yourdomain.com` if they point to the same edge application address.
:::

5. Run a new `GET` request to retrieve the `hosted_zone_id`, which indicates [the DNS zone you created](#create-a-dns-zone):

```json
{
    ...
    "results": [
        {
            "domain": "yourdomain.com Zone",
            "is_active": true,
            "name": "yourdomain.com",
            "id": <hosted_zone_id>
        }
    ]
}
```

6. Run the following `POST` request in your terminal, replacing `[TOKEN VALUE]` with your personal token, `hosted_zone_id` with the value from the previous response and the answers list with the Azion domain address as a string:

:::tip
You may also customize the TTL value for DNS servers in the `ttl` field through the request below.
:::

```bash
curl --location 'https://api.azionapi.net/intelligent_dns/<hosted_zone_id>/records' \
--header 'Content-Type: application/json' \
--header 'Authorization: Token [TOKEN VALUE]' \
--header 'Accept: application/json; version=3' \
--data-raw '{
    "record_type": "CNAME",
    "entry": "www",
    "answers_list": [
        "xxxxxxxxxx.map.azionedge.net"
    ],
    "description": "www record",
    "ttl": 20
}'
```

7. You'll receive a reponse confirming that the new record was created:

```json
{
    "results": {
        "answers_list": [
            "xxxxxxxxxx.map.azionedge.net"
        ],
        "zone_id": <hosted_zone_id>,
        "record_type": "CNAME",
        "ttl": 20,
        "policy": "simple",
        "entry": "www",
        "id": <record_id>,
        "description": "www record"
    }
}
```

Wait a couple of minutes for the changes to propagate. You can [run the DIG command](/en/documentation/products/guides/run-the-dig-command/) in your terminal to check whether your domain points to the Azion address.
