---
title: How to install Rate Limiting with Penalty through Azion Marketplace
description: This integration allows you to control of incoming traffic right at the edge and protect your applications.
meta_tags: marketplace, edge computing, rate limiting
namespace: docs_guides_rate_limiting_penalty
permalink: /documentation/products/guides/rate-limiting-with-penalty/
---

Azion **Rate Limiting with Penalty** allows you to control of incoming traffic right at the edge of the network, avoiding bottlenecks, managing traffic spikes, and protecting your applications from potential threats such as DDoS, fuzzing, or brute force attacks. 

With this integration, based on an edge function, you can define:

- The **Limiting requests** and **window limit** features, including specific rate limit windows for different periods of the day.
- A **penalty configuration** that analyzes the validity of each request.
  - If the request isn't valid, it blocks the request and returns the user a `403 Forbidden` status code. If the request is valid, it counts the request and, in case it reaches the defined rate limit, it interrupts the request and returns a `429 Too Many Requests` status code.

It's integrated with the `upstash/ratelimit` library and provides a global accounting of the rate limit, summing up requests received across the entire network, instead of counting separately for each edge location.

---

## Requirements 

To start using this integration, you need to:

- Create an [Upstash account](https://console.upstash.com/login).
- Create a Global Database for the best available edge latency in the [Upstash Console](https://console.upstash.com/).

---

## Getting the integration

To install the **Rate Limiting with Penalty** integration provided by Azion Marketplace, you have to:

1. Log in to [Real-Time Manager (RTM)](https://manager.azion.com/).
- If you don’t have an account yet, create a new one [by visiting the sign-up page](https://manager.azion.com/signup/).
2. On the upper-left corner of the page, open the **Products menu**, represented by three horizontal lines.
3. Select **Marketplace**.
4. On the Marketplace homepage, select the search box and type “*rate Limiting with penalty*” or browse through the cards to find the integration.
5. Once you’ve found the **Rate Limiting with Penalty** card, select it to go to the solution page.
6. On the solution page, look for the **Subscribe for** section on the bottom-right corner.
7. Click the **Get It Now** button.

You’ll see a message indicating that your solution was successfully installed. Then, you'll need to complete the steps explained below to instanciate and 

---

## Configuiring the solution

### Setting up the Edge Firewall rule

To instantiate the **Rate Limiting with Penalty** integration, follow the steps:

1. Open the **Products menu**, select **Edge Firewall** in the SECURE section.
2. Click the **Add Rule Set** button.
3. Give an easy-to-remember name to your new rule.
4. Select the domains you want to protect with the function.
5. Click the **Save** button.

Done. Now you’ve instantiated the rule for your function.

### Setting up the Edge Firewall function

You need to enable first the **Edge Functions** switch to instantiate the solutions. To do so, follow these steps:

1. On the **Main Settings** tab, look for the *Edge Functions** switch.
2. Turn it on and then click the **Save** button.

Done. Now you have access to edge functions on your edge firewall.

Then, while still on the Edge Firewall page, select the **Functions** tab and follow these steps:

1. Click the **Add Function** button.
2. Give an easy-to-remember name to your instance.
3. On the dropdown menu, select the **Rate Limiting with Penalty** function.

CODE AND TABS STUFF

#### Important


### Setting up the Rules Engine

To finish, you have to set up a Rules Engine to configure the behavior and the criteria to run the function.

Still in the Edge Firewall page, select the Rules Engine tab and follow these steps:

1. Click the **New Rule** button.
2. Give an easy-to-remember name to the rule.
3. Select a *criteria* to run and catch the domains that you want to run the solution on.
xxxxxxxxx
4. Below, select the **Run Function** *behavior* to the *criteria*.
5. Select the **Rate Limiting with Penalty** function according to the name you gave it before.
6. Click the **Save** button.

Done. You now have your edge application protected against xxxxxx by using **Rate Limiting with Penalty**.

import Button from '~/components/Button.astro';

<Button href="/en/documentation/products/edge-application/domains/" text="go to Domains reference" variant="secondary"> 

</Button>
